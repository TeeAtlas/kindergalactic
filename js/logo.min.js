let e,t=0,r=0,n=!1;const i=70,l=.15,a=3e3,u=6e3,o=12,c=.95,s=document.querySelectorAll(".pupil"),y=document.querySelectorAll(".eye-mask"),m=Array.from(document.querySelectorAll(".eye")).map(((e,t)=>{const r=s[t],n=y[t];if(r&&n){const t=parseFloat(e.getAttribute("cx")),l=parseFloat(e.getAttribute("cy")),a=parseFloat(e.getAttribute("rx")),u=parseFloat(e.getAttribute("ry")),o=parseFloat(r.getAttribute("r")),c=parseFloat(r.getAttribute("cx")),s=parseFloat(r.getAttribute("cy"));return{pupil:r,eye:e,eyeMask:n,eyeCX:t,eyeCY:l,maxMoveX:(a-o)*i*.01,maxMoveY:(u-o)*i*.01,ryOriginal:u,ryCurrent:u,blinkFrame:0,currentPupilX:c,currentPupilY:s,targetPupilX:c,targetPupilY:s}}})).filter(Boolean),p=document.querySelector("svg"),b=p.createSVGPoint(),g=(e,t)=>(b.x=e,b.y=t,b.matrixTransform(p.getScreenCTM().inverse())),F=()=>{for(let e=0;e<m.length;e++){const t=m[e];if(t.blinkFrame>0){const e=6;let r;r=t.blinkFrame<=e?t.blinkFrame/e:(o-t.blinkFrame)/e,r=.5-.5*Math.cos(r*Math.PI),t.ryCurrent=t.ryOriginal*(1-.98*r),t.eye.setAttribute("ry",t.ryCurrent),t.eyeMask.setAttribute("ry",t.ryCurrent),t.blinkFrame--,0===t.blinkFrame&&(t.ryCurrent=t.ryOriginal,t.eye.setAttribute("ry",t.ryCurrent),t.eyeMask.setAttribute("ry",t.ryCurrent))}}},A=()=>{const e=a+3e3*Math.random();setTimeout((()=>{if(Math.random()<c)m.forEach((e=>{0===e.blinkFrame&&(e.blinkFrame=o)}));else{const e=m[Math.floor(Math.random()*m.length)];0===e.blinkFrame&&(e.blinkFrame=o)}A()}),e)};function P(e,t){if(n)for(let r=0;r<m.length;r++){const n=m[r],i=e-n.eyeCX,l=t-n.eyeCY,a=i/n.maxMoveX,u=l/n.maxMoveY,o=a*a+u*u;if(o<=1)n.targetPupilX=n.eyeCX+i,n.targetPupilY=n.eyeCY+l;else{const e=1/Math.sqrt(o);n.targetPupilX=n.eyeCX+i*e,n.targetPupilY=n.eyeCY+l*e}}}function f(){for(let e=0;e<m.length;e++){const t=m[e];t.currentPupilX+=(t.targetPupilX-t.currentPupilX)*l,t.currentPupilY+=(t.targetPupilY-t.currentPupilY)*l,t.pupil.setAttribute("cx",t.currentPupilX),t.pupil.setAttribute("cy",t.currentPupilY)}}const C=()=>{F(),P(t,r),f(),requestAnimationFrame(C)};requestAnimationFrame(C),A(),document.addEventListener("mousemove",(e=>{const i=g(e.clientX,e.clientY);t=i.x,r=i.y,n=!0}),{passive:!0}),document.addEventListener("touchmove",(e=>{e.preventDefault();const i=e.touches[0],l=g(i.clientX,i.clientY);t=l.x,r=l.y,n=!0}));